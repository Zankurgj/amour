<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="utf-8" />
    <title>Amourrr</title>
    <meta name="description" content="Amourrr" />
    <meta name="viewport" content="width=device-width" />
    <!-- <link rel="icon" href="img/favicon.png" /> -->
    <meta property="og:image" content="img/dest/preview.jpg" />
    <link rel="stylesheet" href="css/app.min.css" />
  </head>

  <body>
    <header class="main-header">
      <div class="main-header-wrapper">
        <button
          class="btn-hamburger main-header-hamburger btn-hamburger--hide-desktop"
          onclick="onShowMenu(this)"
        >
          <span class="btn-hamburger-icon"></span>
          <span class="visually-hidden">меню</span>
        </button>
        <button
          class="btn-search main-header-btn-search btn-search--hide-desktop"
          onclick="onToggleSearch()"
        >
          <svg class="svg-icon btn-search-icon">
            <use
              xlink:href="./images/sprites/svg/sprite.symbol.svg#search"
            ></use>
          </svg>
        </button>
        <a class="main-header-logo" href="/">
          <img src="./images/dest/icons/header-logo.svg" alt="лого" />
        </a>
        <nav class="main-header-nav">
          <div class="main-header-nav-wrapper" >
          <ul class="main-header-nav-item-wrapper">
            <li class="main-header-nav-item">
              <a href="#">Каталог</a>
            </li>
            <li class="main-header-nav-item">
              <a href="#">О бренде</a>
            </li>
            <li class="main-header-nav-item">
              <a href="#" class="active">Таблица размеров</a>
            </li>
            <li class="main-header-nav-item">
              <a href="#">Доставка и возврат</a>
            </li>
            <li class="main-header-nav-item">
              <a href="#">Контакты</a>
            </li>
          </ul>
          <ul class="main-header-nav-location">
            <li class="main-header-nav-location-item">
              <svg class="svg-icon main-header-nav-location-item-icon">
                <use
                  xlink:href="./images/sprites/svg/sprite.symbol.svg#location"
                ></use>
              </svg>
              <span class="active">Москва</span>
            </li>
          </ul>
          <ul class="main-header-nav-lang">
            <li class="main-header-nav-lang-item">
              <a href="#" class="active">ru</a>
            </li>
            <li class="main-header-nav-lang-item"><a href="#">en</a></li>
          </ul>
        </div>
        </nav>
      
      <div class="main-header-link-block">
        <div class="main-header-search-inner">
          <button
            class="btn-close btn-close-search"
            onclick="onToggleSearch()"
          >
            <svg class="svg-icon btn-close-search-icon">
              <use
                xlink:href="./images/sprites/svg/sprite.symbol.svg#close"
              ></use>
            </svg>
            <span class="visually-hidden">закрыть</span>
          </button>
          <input type="text" class="base-input base-input--header-search" id="search-input">
          <div class="main-header-search-result">
            <div class="main-header-search-result-content">
              <span class="main-header-search-result-item--empty">
                Результатов не найдено
              </span>
              <a href="#" class="main-header-search-result-item">Lorem ipsum dolor sit, amet</a>
              <a href="#" class="main-header-search-result-item">Lorem ipsum</a>
              <a href="#" class="main-header-search-result-item">Lorem ipsum dolor sit</a>
            </div>
          </div>
        </div>
        <button class="btn-search main-header-btn-search btn-search--hide-mobile header-link-item" onclick="onToggleSearch()">
          <svg class="svg-icon btn-search-icon">
            <use
              xlink:href="./images/sprites/svg/sprite.symbol.svg#search"
            ></use>
          </svg>
        </button>

        <a
          href="#"
          class="btn btn-heart main-header-btn-heart btn-heart--full header-link-item"
        >
          <svg class="svg-icon btn-heart-icon">
            <use
              xlink:href="./images/sprites/svg/sprite.symbol.svg#heart"
            ></use>
          </svg>
          <span class="visually-hidden">понравилось</span>
        </a>

        <a
          href="#"
          class="btn btn-basket main-header-btn-basket btn-basket--full header-link-item"
        >
          <svg class="svg-icon btn-basket-icon">
            <use
              xlink:href="./images/sprites/svg/sprite.symbol.svg#basket"
            ></use>
          </svg>
          <span class="visually-hidden">корзина</span>
        </a>
      </div>
    </div>
    </header>

    <div class="order-page">
      <div class="container container-order">
        <h1 class="order-title">Оформление заказа</h1>

        <form action="" class="order-form order-row">
          <div class="order-column">
          <div class="order-block order-block--delivery">
            <label for="promocode-input" class="base-input-wrapper base-input-wrapper--delivery">
              <input type="text" class="base-input base-input--order" id="order-city" placeholder="г. Москва">
              <span class="base-input-err-text">текст ошибки</span>
            </label>
            <h2 class="order-item-title order-delivery-title">Выберите способ доставки</h2>
            <div class="radio-btn-wrapper radio-btn-wrapper--order">
              <input type="radio" class="btn-radio" name="delivery" value="delivery1" id="delivery1" checked>
              <label for="delivery1" class="btn-radio-label">
                <span class="btn-radio-icon"></span>
                <span class="btn-radio-label-title">Самовывоз (шоурум Elen Dan)</span>
                <span class="btn-radio-label-sub-title"> Москва, наб. Тараса Шевченко, 3, корп.3 </span>
              </label>
            </div>

            <div class="radio-btn-wrapper radio-btn-wrapper--order">
              <input type="radio" class="btn-radio" name="delivery" value="delivery1" id="delivery2">
            <label for="delivery2" class="btn-radio-label">
              <span class="btn-radio-icon"></span>
              <span class="btn-radio-label-title">Курьером Amour с примеркой</span>
              <span class="btn-radio-label-sub-title"> от 350 <i class="fa fa-rub" aria-hidden="true"></i> в пределах МКАД</span>
            </label>
            </div> 

            <div class="radio-btn-wrapper radio-btn-wrapper--order">
              <input type="radio" class="btn-radio" name="delivery" value="delivery1" id="delivery3">
            <label for="delivery3" class="btn-radio-label">
              <span class="btn-radio-icon"></span>
              <span class="btn-radio-label-title">Курьером Amour за МКАД</span>
              <span class="btn-radio-label-sub-title"> от 600 <i class="fa fa-rub" aria-hidden="true"></i>, стоимость расчитывается индивидуально, оплата наличными </span>
            </label>
            </div> 

            <div class="radio-btn-wrapper radio-btn-wrapper--order">
              <input type="radio" class="btn-radio" name="delivery" value="delivery1" id="delivery4">
            <label for="delivery4" class="btn-radio-label">
              <span class="btn-radio-icon"></span>
              <span class="btn-radio-label-title">Курьером CDEK</span>
              <span class="btn-radio-label-sub-title"> от 380 <i class="fa fa-rub" aria-hidden="true"></i>, в зависимости от адреса доставки </span>
            </label>
            </div> 
          </div>
          </div>
          <div class="order-column">
          <div class="order-block order-block--adress">
            <h2 class="order-item-title order-adress-title">Адрес получателя</h2>
            <label for="order-street" class="base-input-wrapper base-input-wrapper--adress">
              <span class="base-input-wrapper-title">Улица</span>
              <input type="text" class="base-input base-input--order base-input--required" id="order-street" placeholder="ул. Малая Бронная" required>
              <span class="base-input-err-text">текст ошибки</span>
            </label>
            <div class="base-input-wrapper-half">
              <label for="order-house" class="base-input-wrapper base-input-wrapper--adress">
                <span class="base-input-wrapper-title">Дом</span>
                <input class="base-input base-input--order base-input--required" id="order-house" placeholder="21" required>
                <span class="base-input-err-text">текст ошибки</span>
              </label>
              <label for="order-room" class="base-input-wrapper base-input-wrapper--adress">
                <span class="base-input-wrapper-title">Квартира</span>
                <input class="base-input base-input--order base-input--required" id="order-room" placeholder="91" required>
                <span class="base-input-err-text">текст ошибки</span>
              </label>
            </div>
            <label for="order-name" class="base-input-wrapper base-input-wrapper--adress">
              <span class="base-input-wrapper-title">ФИО</span>
              <input type="text" class="base-input base-input--order base-input--required" id="order-name" placeholder="Александр Александрович Иванов" required>
              <span class="base-input-desc">Полные фамилия, имя и отчество могут потребоваться при получении заказа</span>
            </label>
            <label for="order-mail" class="base-input-wrapper base-input-wrapper--adress">
              <span class="base-input-wrapper-title">Электронная почта</span>
              <input type="email" class="base-input base-input--order base-input--required error" id="order-mail" placeholder="ул. Малая Бронная" required>
              <span class="base-input-err-text">текст ошибки</span>
            </label>

            <label for="order-phone" class="base-input-wrapper base-input-wrapper--adress">
              <span class="base-input-wrapper-title">Телефон</span>
              <input type="text" class="base-input base-input--order base-input--required" id="order-phone" placeholder="+7 999 005 995 00" required>
              <span class="base-input-desc">Номер телефона используется для оповещений об изменениях статуса заказа</span>
            </label>
          </div>
        </div>
        <div class="order-column">
          <div class="order-block order-block--extra">
            <h2 class="order-item-title order-adress-title">Дополнительно</h2>
            <label for="input-extra" class="base-textarea-label">
              <span class="base-textarea-title">Комментарий к заказу</span>
              <textarea name="input-extra" id="input-extra" class="base-textarea"></textarea>
            </label>
          </div>
          <div class="order-block order-block--payment">
            <h2 class="order-item-title order-adress-title">Способ оплаты</h2>
            <div class="radio-btn-wrapper radio-btn-wrapper--order">
              <input type="radio" class="btn-radio" name="payment" value="delivery1" id="payment1">
              <label for="payment1" class="btn-radio-label">
                <span class="btn-radio-icon"></span>
                <span class="btn-radio-label-title">Банковской картой онлайн</span>
                <span class="btn-radio-label-sub-title">(Visa, Master Card, МИР)</span>
              </label>
            </div>
            <div class="radio-btn-wrapper radio-btn-wrapper--order">
              <input type="radio" class="btn-radio" name="payment" value="delivery1" id="payment2">
              <label for="payment2" class="btn-radio-label">
                <span class="btn-radio-icon"></span>
                <span class="btn-radio-label-title">Наличными при получении</span>
              </label>
            </div> 
            <div class="btn-wrapper-order">
              <button class="btn-primary btn-primary--payment">
                Оплатить
                <svg class="svg-icon btn-promocode-block-icon">
                  <use
                    xlink:href="./images/sprites/svg/sprite.symbol.svg#spoiler-arrow"
                  ></use>
                </svg>
              </button>
              <p class="btn-wrapper-order-text">
                Нажимая “Оплатить” , вы соглашаетесь с <br> условиями <a href="#">публичной оферты</a>
              </p>
            </div>
          </div>
        </div>
        </form>
       </div>
    </div>
      
    <footer class="main-footer">
      <section class="contacts-block container">
        <h2 class="contacts-block-title">Нужна помощь?</h2>
        <a
          href="tel:7 968 941 33"
          class="contacts-block-item contacts-block-phone"
          >+ 7 968 941 33 77</a
        >
        <a
          href="mailto:amourrr.moscow@yandex.ru"
          class="contacts-block-item contacts-block-mail"
          >amourrr.moscow@yandex.ru</a
        >
        <div class="contacts-block-social">
          <a
            href="https://api.whatsapp.com/send?phone=79685669977"
            class="contacts-block-social-item contacts-block-social-item-wp"
            ><span class="visually-hidden">whatsapp</span></a
          >
          <a
            href="https://www.instagram.com/a.amourrr/"
            class="contacts-block-social-item contacts-block-social-item-inst"
            ><span class="visually-hidden">instagram</span></a
          >
        </div>
      </div>
    </footer>

    <article class="popup-auth">
      <div class="popup-overlay" onclick="onToggleAuth()"></div>
        <div class="popup-auth-container">
          <button
          class="btn-close btn-close-popup-auth"
          onclick="onToggleAuth()"
        >
          <svg class="svg-icon btn-close-popup-auth-icon">
            <use
              xlink:href="./images/sprites/svg/sprite.symbol.svg#close"
            ></use>
          </svg>
          <span class="visually-hidden">закрыть</span>
        </button>

          <form action="" class="popup-auth-form popup-auth-form--show" id="authPhone">
            <h3 class="popup-auth-title">Авторизация по телефону</h3>
            <label class="base-input-wrapper base-input-wrapper--popup-auth">
              <input type="text" id="phone" class="base-input base-input--popup-auth">
            <div class="base-input-err-text hide" id="phoneInputErr"></div>
            </label>
            <label class="base-input-wrapper base-input-wrapper--popup-auth">
              <input type="text" id="phonePwd" class="base-input base-input--popup-auth" placeholder="Введите код">
            </label>
            <button class="btn-primary btn-primary--popup-auth" type="submit" disabled id="getCode">Получить код</button>
            <button class="btn-primary btn-primary--popup-auth btn-primary--popup-auth-nav" onclick="showAuthForm('authMail')" type="button">Войти по email</button>
            <button class="btn-primary btn-primary--popup-auth btn-primary--popup-auth-nav" onclick="showAuthForm('restorePwd')" type="button">Забыли пароль?</button>
          </form>

          <form action="" class="popup-auth-form" id="authMail">
            <h3 class="popup-auth-title">Авторизация по почте</h3>
            <label class="base-input-wrapper base-input-wrapper--popup-auth">
              <input type="text" id="email" class="base-input base-input--popup-auth" placeholder="Email">
              <div class="base-input-err-text">Ошибка</div>
            </label>
            <label class="base-input-wrapper base-input-wrapper--popup-auth">
              <input type="text" id="emailPwd" class="base-input base-input--popup-auth error" placeholder="Введите пароль">
              <div class="base-input-err-text">Неверный пароль</div>
            </label>
            <button class="btn-primary btn-primary--popup-auth" type="submit">Войти</button>

            <button class="btn-primary btn-primary--popup-auth btn-primary--popup-auth-nav" onclick="showAuthForm('authPhone')" type="button">Войти по телефону</button>
            <button class="btn-primary btn-primary--popup-auth btn-primary--popup-auth-nav" onclick="showAuthForm('restorePwd')" type="button">Забыли пароль?</button>
          </form>

          <form action="" class="popup-auth-form" id="restorePwd">
            <h3 class="popup-auth-title">Восстановление пароля</h3>
            <p class="popup-auth-form-text">Укажите e-mail, на который мы отправим новый пароль.</p>
            <label class="base-input-wrapper base-input-wrapper--popup-auth">
              <input type="text" id="restoreEmail" class="base-input base-input--popup-auth" placeholder="Email">
            </label>
            <button class="btn-primary btn-primary--popup-auth" type="submit">Отправить</button>

            <button class="btn-primary btn-primary--popup-auth btn-primary--popup-auth-nav" onclick="showAuthForm('authPhone')" type="button">Войти по телефону</button>
          </form>

      </div>
    </article>

    <script src="js/app.min.js"></script>
    <script>
      var inputPhone = document.querySelector('#phone');
      var iti = window.intlTelInput(inputPhone, {
        initialCountry: "ru",
        preferredCountries: ['ru', 'kz', 'ua', 'by'],
        separateDialCode: true
      });
      var errorMsg = document.querySelector("#phoneInputErr");
      var codeBtn = document.querySelector("#getCode");
      var errorMap = ["Неправильный номер", "Неверный код страны", "Неправильный номер", "Неправильный номер", "Неправильный номер"];

      var maskPhone = $("#phone").attr('placeholder').replace(/[0-9]/g, 9);      
      $('#phone').mask(maskPhone);

      $("#phone").on("countrychange", function (e, countryData) {
          $("#phone").val('');
          var maskPhone = $("#phone").attr('placeholder').replace(/[0-9]/g, 9);
          $('#phone').mask(maskPhone);
      });

      // Валидация
      var reset = function() {
        inputPhone.classList.remove("error");
        errorMsg.innerHTML = "";
        errorMsg.classList.add("hide");
        codeBtn.disabled = true;
      };

      inputPhone.addEventListener('keyup', function() {
        reset();
        if (inputPhone.value.trim()) {
          if (iti.isValidNumber()) {
            codeBtn.disabled = false;
          } else {
            inputPhone.classList.add("error");
            var errorCode = iti.getValidationError();
            errorMsg.innerHTML = errorMap[errorCode]||'Неправильный номер';
            errorMsg.classList.remove("hide");
          }
        }
      });
      
      // Инициализируем попап
      document.addEventListener('DOMContentLoaded', function () {
        onToggleAuth();
      });

    </script>
  </body>
</html>
